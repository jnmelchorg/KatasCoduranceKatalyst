import pytest
from src.Bowling import score


@pytest.mark.parametrize("game, expected_score",
                         [("--|--|--|--|--|--|--|--|--|--||", 0),
                          ("-1|--|--|--|--|--|--|--|--|--||", 1),
                          ("-2|--|--|--|--|--|--|--|--|--||", 2),
                          ("11|--|--|--|--|--|--|--|--|--||", 2),
                          ("21|--|--|--|--|--|--|--|--|--||", 3),
                          ("21|1-|--|--|--|--|--|--|--|--||", 4),
                          ("-/|--|--|--|--|--|--|--|--|--||", 10),
                          ("-/|1-|--|--|--|--|--|--|--|--||", 12),
                          ("-/|11|--|--|--|--|--|--|--|--||", 13),
                          ("-/|-1|--|--|--|--|--|--|--|--||", 11),
                          ("-/|2/|--|--|--|--|--|--|--|--||", 22),
                          ("-/|2/|9-|--|--|--|--|--|--|--||", 40),
                          ("X|--|--|--|--|--|--|--|--|--||", 10),
                          ("X|1-|--|--|--|--|--|--|--|--||", 12),
                          ("X|-1|--|--|--|--|--|--|--|--||", 12),
                          ("X|11|--|--|--|--|--|--|--|--||", 14),
                          ("X|-/|1-|--|--|--|--|--|--|--||", 32),
                          ("X|X|11|--|--|--|--|--|--|--||", 35),
                          ("X|X|X|-1|--|--|--|--|--|--||", 62),
                          ("--|--|--|--|--|--|--|--|--|-/||-", 10),
                          ("--|--|--|--|--|--|--|--|--|-/||2", 12),
                          ("--|--|--|--|--|--|--|--|--|-/||X", 20),
                          ("--|--|--|--|--|--|--|--|--|X||11", 12),
                          ("--|--|--|--|--|--|--|--|--|X||-1", 11),
                          ("--|--|--|--|--|--|--|--|--|X||1-", 11),
                          ("--|--|--|--|--|--|--|--|--|X||X-", 20),
                          ("--|--|--|--|--|--|--|--|--|X||X1", 21),
                          ("--|--|--|--|--|--|--|--|--|X||-X", 20),
                          ("--|--|--|--|--|--|--|--|--|X||1X", 21),
                          ("--|--|--|--|--|--|--|--|--|X||XX", 30),
                          ("--|--|--|--|--|--|--|--|X|X||XX", 60),
                          ("--|--|--|--|--|--|--|--|X|X||1X", 42),
                          ("--|--|--|--|--|--|--|--|X|X||-X", 40),
                          ("X|X|X|X|X|X|X|X|X|X||XX", 300)
                          ])
def test_score_functionality(game, expected_score):
    assert score(game=game) == expected_score


@pytest.mark.parametrize("game, expected_error",
                         [("--|--|--|--|--|--|--|--|--|--|--||", ValueError),
                          ("---|--|--|--|--|--|--|--|--|--||", ValueError),
                          ("|--|--|--|--|--|--|--|--|--||", ValueError),
                          ("1|--|--|--|--|--|--|--|--|--||", ValueError),
                          ("--|--|-?|--|--|--|--|--|--|--||", ValueError),
                          ("--|--|--|--|--|--|--|--|--|--|-|", ValueError),
                          ])
def test_score_throws_error_with_incorrect_inputs(game, expected_error):
    with pytest.raises(expected_error):
        score(game=game)
